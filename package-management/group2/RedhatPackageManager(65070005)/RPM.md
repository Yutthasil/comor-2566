# Red hat PackageManager **(RPM)**
## **Red Hat Package Manager** (**RPM**) 
เป็นรูปแบบของแพคเกจ (package) 
และเครื่องมือที่ใช้ในระบบปฏิบัติการ Linux เพื่อจัดการกับการติดตั้ง, การอัปเดต, และการลบซอฟต์แวร์บนระบบ. 
**RPM** ถูกพัฒนาโดย **Red Hat** และใช้กันอย่างแพร่หลายในระบบปฏิบัติการที่มีต้นฉบับจากระบบ 
**RHEL** (**Red Hat Enterprise Linux**)

> **RPM** นั้นมี 5 โหมดในการทำงานนั้นก็คือ การติดตั้ง(install), ถอนการติดตั้ง(uninstall), อัพเกรด(upgrade), การค้นหา(querying) และการตรวจสอบ
(verifying) หากต้องการที่จะดูข้อมูลเพิ่มเติมสามารถ `rpm --help` หรือ `man rpm` ใน **terminal** ได้

### จุดเด่นของ RPM
* #### การอัพเกรด (Upgrade)
    ด้วย **RPM** คุณสามารถอัพเกรด components ของระบบได้โดยไม่ต้อง
    Reinstall ใหม่ทั้งหมด เมื่อ Operating system (ระบบปฏิบัติการ) มีการอัพเดท
    เวอร์ชั่นใหม่ที่ใช้ **RPM** ในการจัดการ package 
    (อย่างเช่น **Red Hat Enterprise Linux**) 
    คุณไม่จำเป็นที่จะต้องทำการ Reinstall ตัวของระบบปฏิบัติการลงบนเครื่องอีกครั้ง โดยรวม
    RPM นั้น สามารถทำให้อัพเกรดตัวของระบบได้อย่างชาญฉลาดและอัตโนมัติอีกด้วย
    และการตั้งค่าที่ถูกเปลี่ยนแปลงใน package นั้นยังคงอยู่ทำให้ไม่สูญเสียในสิ่งที่คุณนั้นได้ปรับเปลี่ยนในระบบอีกด้วย
* #### การค้นหาที่ทรงพลัง!! (Powerful Querying)
    RPM นั้นถูกดีไซน์มาเพื่อสำหรับการค้นหาที่ละเอียดมากขึ่น คุณสามารถที่จะหา package หลายๆในฐานข้อมูล
    หรือหาแค่ไฟล์เดียวและคุณยังสามารถหาได้ว่าไฟล์ที่คุณต้องการนั้นอยู่ใน
    folder ใหนอีกด้วย ไฟล์ที่ RPM สร้างขึ้นมานั้นถูกบีบอัดและจัดเรียงอย่างดีและมี binary header
    ที่ระบุข้อมูลที่สำคัญของ package และไฟล์ที่อยู่ข้างในทำให้การหานั้นสามารถทำได้อย่างรวดเร็ว

* ####  การตรวจสอบระบบ (System Verification)
    คุณเคยกังวลว่าไฟล์สำคัญที่คุณลบนั้นมีความสำคัญต่อ package ใช่หรือไม่? ถ้าหากกังวลคุณสามารถใช้ 
    RPM ในการตรวจสอบไฟล์เพื่อที่จะตรวจหาว่ามีอะไรที่่แตกต่างไปจากเดิมจากไฟล์ของคุณหรือปล่าว
    โดยถ้าหากตรวจพบคุณสามารถ Reinstall ได้ออย่าง่ายดายและการตั้งค่าของคุณนั้นยังคงอยู่
* #### มีแหล่งที่มาที่ชัดเจน (Pristine Source)
    สิ่งที่เป็นจุดเด่นสำคัญของ RPM คือการให้ใช้แหล่งที่มาของต้นฉบับที่ถูกแจกจ่ายโดยผู้ผัฒนา software และด้วย RPM
    คุณมีแหล่งที่มาของ software พร้อมกับ patches ที่ถูกใช้งานและมีคู่มือให้พร้อม
## การใช้งาน RPM
### หา package ของ RPM
ก่อนจะใช้งานตัวของ RPM package คุณจะต้องรู้วิธีที่จะหามัน การค้นหาใน internet นั้นคุณจะเจอกับ
RPM repository ที่ต้องใช้ YUM หรือ DNF ในการ install ถ้าหากต้องการที่จะใช้ตัว RPM package
ที่สร้างโดย red hat คุณสามารถหาได้ใน
* RPM package by Red hat
  * [The Red Hat Errata Page](http://www.redhat.com/apps/support/errata/)
  * The Red Hat Enterprise Linux CD-ROMs
  * Red Hat Network

### การติดตั้ง RPM
RPM package จะมีไฟล์ทีมีชื่อคล้ายกับ `foo-1.0-1.i386.rpm` โดยในที่นี้นั้น `foo` คือชื่อไฟล์ที่มีเวอร์ชั่น
`1.0` ที่ปล่อยออกมาครัั้งที่ `1` และมีโครงสร้างแบบ `i386` ในการลง package นั้นคุณต้องเป็น root
ก่อนถึงจะสามารถ install package ได้
```
rpm -ivh foo-1.0-1.i386.rpm
```
หริอ
```
rpm -Uvh foo-1.0-1.i386.rpm
```
เมื่อทำการ install สำเร็จระบบจะแสดงเป็น: 
```
Preparing...                ########################################### [100%]
   1:foo                    ########################################### [100%]
```
ถ้าหาก package ที่มีชื่อและเวอร์ชั่นเดียวกันถูก install อยู่แล้วระบบจะแสดง:
```
Preparing...                ########################################### [100%]
package foo-1.0-1 is already installed
```
แต้ถ้าหากต้องการที่จะติดตั้งตัวของ package อยู่ดีคุณสามารถ `--replacepkgs` โดยจะเป็น
option การรันคำสั่งเพิ้อไม่ให้สนใจ error:
```
rpm -ivh --replacepkgs foo-1.0-1.i386.rpm
```
### ถอนการติดตั้ง
การถอนการติดตั้งสามารถทำได้ง่ายๆเพียงแค่ทำการ `rpm -e ชื่อ package`
เช่นหากต้องการลบ package `foo` ที่ได้ install ก่อนหน้านี้
```
rpm -e foo
```
### การ upgrade
การอัพเกรดก็คล้ายคลึงกับการ install เมื่อทำการติดตั้งเวอร์ชั่นใหม่เวอร์ชั่นใหม่ระบบจะทำการ upgrade
ให้โดยที่ยังเก็บ config ไว้อยู่
```
rpm -Uvh foo-2.0-1.i386.rpm
```
### การค้นหา
RPM เก็บข้อมูลของ RPM package ไว้ทุกอย่างโดยข้อมูลจะถูกเก็บไว้ใน `/var/lib/rpm/` และ
ถูกใช้เพื่อค้นหาว่ามี package ใหนถูก install ไว้ในระบบบ้าง และทุกเวอร์ชั่นของ package นั้นจะ
เก็บ config ไว้ในนี้เช่นกัน
####
การค้นหาใน database นั้นสามารถทำได้ด้วยคำสั่ง `-q` คำสั่ง `rpm -q package name`
สามารถใช้เพื่อการแสดงชื่อ package, เวอร์ขั่น และจำนวน package ที่มีชื่อเดียวกันถูกติดตั่ง
อย่างเช่น เมื่อทำการ `rpm -q foo` เพื่อให้แสดงถึง package `foo` ที่ได้ติดตั้งก่อนหน้านี้จะได้ผลลัพธ์ดังนี้:
```
foo-2.0-1
```
คุณสามารถใช้ option ในคำสั่งเพื่อที่จะเจาะจงการค้นหาได้มากขึ้น:
* `-a`- ค้นหา package ที่ถูกติดตั้งทั้งหมด
* `-f <filename>`- การค้นหาชื่อ package ของชื่อไฟล์
* `-p <packagefile>`- ค้นหาไฟล์ package ที่ถูก uninstall ไปแล้ว
และคุณยังสามารถใช้ option อื่นๆในการค้นหาได้อีกด้วย
####  การตรวจสอบ package
การตรวจสอบ package นั้นจะใช้วิธีการเปรียบเทียบไฟล์ที่ติดตั้งจาก package ด้วยแหล่งฐานข้อมูลเดียวกันกับ
package เดิมการเปรียบเทียบนั้นจะใช้การตรวจขนาด, MD5 sum, ประเภท, owner และ group ของไฟล์
ในแต่ละไฟล์
####
การใช้ command `rpm -V` จะสามารถใช้ในการตรวจเช็ค package ชื่อนั้นๆ โดยหากคุณมีไฟล์ package
ที่คุณอยากจะตรวจสอบ เช่นหากคุณอยากจะตรวจสอบ package และไฟล์ที่เกี่ยวข้องกับ foo ว่า package นี้นั้นมีปัญหาหรือปล่าวคุณสามารที่จะ:
```
rpm -V foo
```
เพื่อที่จะตรวจสอบไฟล์ทั้งหมดใน package ของ foo
* หากคุณต้องการที่จะตรวจสอบเพียงแค่ตัวของ package
  ```
  rpm -Vf /usr/bin/foo
  ```
  ในตัวอย่างนี้นั้นจะใช้ path `/usr/bin/foo` เพื่อที่จะตรวจสอบไฟล์แค่ขอบเขตของไฟล์ที่เราค้นหา
####
* ถ้าหากต้องการตรวจสอบ package ทั้งหมดในระบบ
  ```
  rpm -Va
  ```
* ถ้าหากต้องการตรวจสอบ package ที่ติดตั้งแล้วก็ไฟล์ที่เป็น RPM package ไฟล์
  ```
  rpm -Vp foo-1.0-1.i386.rpm
  ```
## แหล่งอ้างอิง
 [Red hat package manager](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/5/html/deployment_guide/ch-rpm)
## จัดทำโดย
<h4>กนกพล โปัยขำ 65070005</h4>
<img src="https://cdn.discordapp.com/attachments/1195967188335603753/1204303957103476776/20240118_184611.jpg?ex=65d43e76&is=65c1c976&hm=a36f93e0559bba9fd05a47c13647641af9eb9274930120a61dd73692d30735b8&" width="50%" height="50%">



