# Files and Directories, FHS
ระบบปฏิบัติการของ Linux นั้นมีการจัดการกับโครงสร้างของไฟล์และไดเร็กทอรีโดยใช้มาตรฐาน FHS ซึ่งเป็นโครงสร้างแบบลำดับชั้น โดยแต่ละไฟล์นั้นสามารถกำหนดสิทธิ์ที่ต่างกันเพื่อควบคุมการเข้าถึง การอ่าน และการเขียน

<br>

โครงสร้างของระบบไฟล์ใน Linux ส่วนใหญ่ประกอบด้วย 3 ชั้นหลัก
#### &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1. Logical File System 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ทำหน้าที่เป็นส่วนที่ใช้ติดต่อกันระหว่างแอปพลิเคชันของผู้ใช้ และระบบไฟล์ เป็นส่วนที่ช่วยอำนวยความสะดวกในใช้งานต่างๆ 
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;เช่น การเปิดปิดไฟล์ การอ่านไฟล์ 

#### &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2. Virtual File System (VFS) 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;เป็นส่วนที่ช่วยให้ระบบ Physical File System นั้นสามารถทำงานพร้อมกันได้ 

#### &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3. Physical File System 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ส่วนที่ทำหน้าที่ในการจัดการเกี่ยวกับบล็อกของหน่วยความจำบน disk โดยการจัดเก็บและเรียกดูข้อมูลนั้น จะเป็นการโต้ตอบกับอุปกรณ์ฮาร์ดแวร์โดยตรง <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;และยังช่วยในการจัดสรรทรัพยากรที่ใช้ในการจัดเก็บข้อมูลให้มีประสิทธิภาพ 

![](https://media.geeksforgeeks.org/wp-content/uploads/20231128122313/Linux.png)

<br>

## ประเภทของไฟล์ใน Linux

#### 1. Regular files
  เป็นไฟล์ทั่วไปที่พบบ่อยที่สุด เช่น ไฟล์รูปภาพ, โปรแกรมไฟล์
  ```
  $ touch linuxcareer.com
  $ ls -ld linuxcareer.com 
  -rw-rw-r-- 1 lubos lubos 0 Jan 10 12:52 linuxcareer.com
  ```
  &nbsp;จากที่ใช้ คำสั่ง ls แล้วจะเห็น เครื่องหมาย “-” อยู่ที่ตัวแรก เป็นการระบุถึง Regular files และถ้าต้องการลบไฟล์สามารถใช้คำสั่ง rm	
  ```
  $ rm linuxcareer.com 
  $
  ```
  
#### 2. Directories
  เป็นไฟล์ที่พบได้บ่อยใน Linux ใช้เก็บ Subdirectories สามารถใช้คำสั่ง  mkdir ในการสร้างไดเร็กทอรี
  ```
  $ mkdir FileTypes
  $ ls -ld FileTypes/
  drwxrwxr-x 2 lubos lubos 4096 Jan 10 13:14 FileTypes/
  ```
  &nbsp;จะเห็น ตัว “d” อยู่ด้านหน้าสุด เป็นการระบุว่าเป็นไดเร็กทอรีและ ถ้าต้องการลบไดเร็กทอรี ให้ใช้คําสั่ง rmdir
  ```
  $ rmdir FileTypes
  ```
  &nbsp;ถ้าใช้คำสั่ง rmdir กับ ไดเร็กทอรีที่มีไฟล์อยู่ข้างในจะเกิดข้อผิดพลาด
  ```
  rmdir: failed to remove `FileTypes/': Directory not empty
  ```
  &nbsp;ซึ่งเราสามารถแก้ไขได้โดยใช้คำสั่ง
  ```
  $ rm -r FileTypes/
  ```

#### 3. Character device
  ทั้ง character device และ block device เป็นอุปกรณ์ที่ช่วยให้ ผู้ใช้และ โปรแกรมสามารถ ติดต่อสื่อสารกับอุปกรณ์ต่อพ่วงได้ เช่น vmware   
  ```
  $ ls -ld /dev/vmmon 
  crw------- 1 root root 10, 165 Jan  4 10:13 /dev/vmmon
  ```

#### 4. Block Device
  เป็นอุปกรณ์ คล้ายกับ character device โดยส่วนใหญ่จะควบคุมฮาร์ดแวร์เช่น ฮาร์ดไดรฟ์หรือ หน่วยความจำ
  ```
  $ ls -ld /dev/sda
  brw-rw---- 1 root disk 8, 0 Jan  4 10:12 /dev/sda
  ```

#### 5. Local domain sockets
  จะใช้เพื่อสื่อสารระหว่างกระบวนการภายในเครื่อง โดยทั่วไปมักถูกใช้โดยบริการและโปรแกรม เช่น X windows, syslog
  ```
  $ ls -ld /dev/log
  srw-rw-rw- 1 root root 0 Jan  4 10:13 /dev/log
  ```
  &nbsp;สามารถใช้คำสั่ง unlink หรือ rm ในการลบ sockets  

#### 6. Named Pipes
  Named Pipes หรือ FIFOs คล้ายๆ กับ Local domain sockets แต่ Named Pipes จะเป็นช่องทางที่ใช้ในการสื่อสารกันระหว่าง สองโปรแกรมในเครื่อง <br> สามารถสร้างได้โดยคําสั่ง mknod 
  และใช้คําสั่ง rm ในการลบออก

#### 7. Symbolic links
  ผู้ดูแลระบบ (administrator) สามารถกําหนดสัญลักษณ์ให้ไฟล์หรือไดเร็กทอรีเพื่อใช้เป็นตัวชี้ไปยัง<br>ไฟล์ต้นฉบับ ซึ่ง Links จะมีอยู่สองประเภท:
  - hard links
  - soft links

ความแตกต่างระหว่าง hard links และ soft links คือ ถ้าเป็น soft links จะใช้ชื่อไฟล์เป็นแหล่งอ้างอิงในการเข้าถึงไฟล์ แต่ถ้าเป็น hard links จะอ้างอิงไปที่ <br> ไฟล์ต้นฉบับโดยตรง และ hard link ยังไม่สามารถข้ามระบบไฟล์และพาร์ติชันได้ และในการสร้าง soft links สามารถใช้คำสั่ง ln -s ได้
  ```
  $ echo file1 > file1
  $ ln -s file1 file2
  $ cat file2 
  file1
  $ ls -ld file2 
  lrwxrwxrwx 1 lubos lubos 5 Jan 10 14:42 file2 -> file1
  ```
  โดยสามารถใช้คําสั่ง unlink หรือ rm ในการลบ Link

### สรุปประเภทของไฟล์ใน Linux
| ตัวอักษร  | ความหมาย                 | 
|----------|---------------------------|
| `-`      | Regular files             |
| `d`      | Directories               |
| `l`      | Symbolic links            |
| `b`      | Block Device              |
| `p`      | Named Pipes               |
| `c`      | Character device          |
| `s`      | Local domain sockets      |

  <br>

  ---

  <br>
  
## Linux Directories 
  Command คืออะไร command ก็คือคำสั่งที่เราเขียนเพื่อให้ คอมพิวเตอร์ทำงานตามความต้องการของเรา ถ้าเป็นใน windows สามารถ <br> เขียนคำสั่งได้ใน Command Prompt แต่ถ้าเป็นใน Linux จะใช้ Terminal โดยคำสั่งจะถูกส่งไปยัง shell ซึ่งจะทำการอ่านและดำเนินการ <br> โดย shell จะทำหน้าที่เป็นตัวกลางระหว่างผู้ใช้กับคอมพิวเตอร์

  คำสั่ง shell จะมีอยู่สองประเภท
  - Built-in shell commands: เป็นคำสั่งที่เป็นส่วนหนึ่งของ shell 
  - External/Linux commands: เป็นคำสั่งจากภายนอกที่แยกออกมาต่างหากอาจจะเขียนด้วยภาษา C หรือโปรแกรมอื่นๆ

### Linux Directory Commands 

#### 1. pwd  
มาจากคำว่า print working directory เป็นคำสั่งที่ใช้แสดงไดเร็กทอรีที่ทำงานอยู่ใน ปัจจุบัน ซึ่งเมื่อเราเข้าสู่ระบบของ Linux เริ่มต้นจะอยู่ที่ home ไดเร็กทอรี

  รูปแบบการเขียนคำสั่ง
  ```
  pwd [-options] 
  ```

  ตัวอย่างการใช้งาน
  ```
  $ /bin/pwd  
  ```

  ผลลัพธ์
  
  ![](https://static.javatpoint.com/linux/images/linux-pwd-command.png)

  คำสั่ง pwd ในการใช้งานรูปแบบต่างๆ

| รูปแบบการใช้งาน | คำอธิบาย                                                                    |
|-------------------------|--------------------------------------------------------------------|
| `pwd`                   | จะแสดงไดเร็กทอรีที่ทำงานอยู่ในปัจจุบัน                                      |
| `pwd -L`                | จะแสดงไดเร็กทอรีที่ทำงานอยู่ในปัจจุบันและจะแสดงชื่อ link ที่มีการเชื่อมอยู่         |
| `pwd -R`                | จะแสดงเส้นทางกายภาพของไดเร็กทอรีที่ทำงานอยู่ในปัจจุบัน ซึ่งจะไม่แสดงชื่อของลิงก์  |
| `--version`             | จะแสดงเวอร์ชันปัจจุบันของโปรแกรม                                        |


<br>

#### 2. cd 
มาจากคำว่า change directory คำสั่ง cd เป็นคำสั่งที่ใช้เปลี่ยนไดเร็กทอรีที่อยู่ในปัจจุบันไปเป็นไดเร็กทอรี อื่นตามที่ cd เข้าไป

  รูปแบบการเขียนคำสั่ง
  ```
  cd <dirname>
  ```

  ตัวอย่างการใช้งาน
  ```
  cd < current directory> <specified directory>  
  ```

  ผลลัพธ์
  
  ![](https://static.javatpoint.com/linux/images/linux-cd-command1.png)

  คำสั่ง cd ในการใช้งานรูปแบบต่างๆ

| รูปแบบการใช้งาน         | คำอธิบาย                                              |
|------------------------|-------------------------------------------------------|
| `cd`                   | ใช้เปลี่ยนไดเร็กทอรีเพื่อไปทำงานในไดเร็กทอรีอื่น                 |
| `cd ~`                 | คำสั่งนี้จะเปลี่ยนไดร็กทอรีที่อยู่ในปัจจุบันกลับมาที่ home ไดเร็กทอรี   |
| `cd -`                 | จะเปลี่ยนไดเร็กทอรีเป็นไดเร็กทอรีก่อนหน้า                      |
| `cd .`                 | จะเปลี่ยนเป็นไดเร็กทอรีหลักของได้เร็กทอรีที่ทำงานอยู่ในปัจจุบัน      |
| `cd /`                 | จะเปลี่ยนไดเร็กทอรีไปที่ รากของระบบ                         |

<br>

#### 3. ls 
จะเป็นคำสั่งที่ใช้แสดงรายการหรือเนื้อหาต่างๆ ภายในไดเร็กทอรีที่ผู้ใช้อยู่ในปัจจุบัน ทั้งหมด


  รูปแบบกาารเขียนคำสั่ง
  ```
  ls [option] [file/directory]
  ```

  ตัวอย่างการใช้งาน
  ```
  ls
  ```

  ผลลัพธ์

  ![](https://static.javatpoint.com/linux/images/linux-directories-ls-command1.png)

  คำสั่ง ls ในการใช้งานรูปแบบต่างๆ

| รูปแบบการใช้งาน                     | คำอธิบาย                                                                                                        |
|------------------------------------|-----------------------------------------------------------------------------------------------------------------|
| ls -a                              | จะมีไฟล์ที่ขึ้นต้นด้วย (.) ทำให้การใช้คำสั่ง ls ธรรมดา จะไม่แสดงไฟล์ที่ซ่อนอยู่ การใช้คำสั่ง ls -a จะแสดงไฟล์ในไดเร็กทอรีทั้งหมดรวมถึงไฟล์ที่ซ่อนอยู่ด้วย |
| ls -l                              | จะแสดงรายการต่างๆที่อยู่ใน ไดเร็กทอรีโดยจะแสดงรายละเอียดต่างๆ เช่น ขนาดไฟล์, วันที่แก้ไข, สิทธิในการใช้                                     |
| ls -l -block-size=[SIZE]           | จะแสดงไฟล์ในรูปแบบขนาดเฉพาะ โดยกำหนดได้ใน [SIZE]                                                                   |
| ls ~                               | จะแสดงรายการต่างๆที่อยู่ใน home ไดเร็กทอรี                                                                                        |
| ls ../                             | จะแสดงเนื้อหาของไดเร็กทอรีหลัก (parent directory)                                                                              |
| ls -d */                           | จะแสดงเฉพาะไดเร็กทอรีย่อย                                                                                                     |

<br>

#### 4. mkdir
มาจากคำว่า make directory ใช้ในการสร้างไดเร็กทอรีขึ้นมาใหม่

รูปแบบการเขียนคำสั่ง
```
mkdir <dirname>  
```

ตัวอย่างการใช้งาน
```
mkdir created 
```

ผลลัพธ์

![](https://static.javatpoint.com/linux/images/linux-directories-mkdir-command1.png)

คำสั่ง mkdir ในรูปแบบการใช้งานต่างๆ

| รูปแบบการใช้งาน          | คำอธิบาย                                                                                             |
|-------------------------|----------------------------------------------------------------------------------------------------  |
| `mkdir -p (-parents)`   | เป็นการสร้างไดเร็กทอรีย่อยในไดเร็กทอรีหลัก โดยถ้ายังไม่มีไดเร็กทอรีหลักก็จะสร้างไดเร็กทอรีหลักก่อนแล้วค่อยสร้างไดเร็กทอรีย่อย    |
| `mkdir -v (-verbose)`   | จะแสดงข้อความเมื่อสร้างไดเร็กทอรีเสร็จแล้ว โดยปกติแล้วจะแสดงชื่อไดเร็กทอรีที่สร้าง                                     |
| `mkdir -m -mode=MODE`   | จะใช้ในการกำหนดสิทธิ์ในการเข้าถึงไดเร็กทอรีที่สร้างมา โดยสิทธิ์สามารถกำหนดได้เช่น Read (r), Write (w), Execute (x)    |

<br>

#### 5. rmdir
เป็นคำสั่งที่ใช้ในการลบไดเร็กทอรี โดยสามารถลบได้แค่ไดเร็กทอรีที่ว่างเท่านั้น

รูปแบบการเขียนคำสั่ง
```
rmdir <dirname>  
```

ตัวอย่างการใช้งาน
```
rmdir created  
```

ผลลัพธ์

![](https://static.javatpoint.com/linux/images/linux-directories-rmdir-command1.png)

<br>

> [!NOTE]
> - ตัวเลือก -p ในคำสั่ง rmdir ใช้ในกรณีที่ต้องการลบไดเร็กทอรีหลักพร้อมกับไดเร็กทอรีย่อยทั้งหมด

<br>

---

<br>


## Linux File Contents 
สามารถใช้คำสั่งต่อไปนี้ในการดูเนื้อหาที่อยู่ในไฟล์ ในรูปแบบต่างๆ 

| คำสั่ง     | ผลลัพธ์                                                                                               |
|----------|-------------------------------------------------------------------------------------------------------|
| head     | จะแสดงเนื้อหาในส่วนแรกของไฟล์ โดยเริ่มต้นจะแสดง 10 บรรทัดแรกของไฟล์                                           |
| tail     | จะแสดงเนื้อหา 10 บรรทัดสุดท้ายของไฟล์                                                                      |
| cat      | ใช้แสดงเนื้อหาของไฟล์ หรือ ย้ายไฟล์จากที่นึงไปอีกที่นึง                                                           |
| tac      | ใช้แสดงเนื้อหาของไฟล์ โดยจะแสดงบรรทัดสุดท้ายก่อนแล้วไล่ขึ้นมาจนถึงบรรทัดแรกสุด                                     |
| more     | ในกรณีที่เนื้อหาเยอะเกินหน้าจอ ถ้าใช้ more จะแสดงเนื้อหาทีละหน้าจอ และย้อนกลับไม่ได้                                  |
| less     | จะคล้ายกับคำสั่ง more แต่ less จะปรับความกว้างและความสูงของหน้าจออัตโนมัติ ทำให้สามารถ ย้อนกลับมาดูเนื้อหาก่อนหน้าได้    |

<br>

---

<br>

## Filesystem Hierarchy Standard (FHS)

Filesystem Hierarchy Standard เป็นมาตรฐานที่ใช้ในการกำหนดโครงสร้างและเนื้อหาในระบบปฎิบัติการของ Linux แบบลำดับชั้นโดยจะอธิบายว่าไฟล์และไดเร็กทอรีควรมีอะไรบ้าง ทำให้โครงสร้างของระบบไฟล์นั้นเป็นระเบียบและเข้าถึงได้ง่าย โดยบางไดเร็กทอรีการเข้าถึงนั้นต้องใช้สิทธ์ root ในการเข้าถึง

![](https://linuxhandbook.com/content/images/2020/06/linux-directory-structure.png)

- **/bin**
  
  จะมีไฟล์ปฏิบัติการของคําสั่ง shell พื้นฐานมากมาย โปรแกรมส่วนใหญ่จะเก็บอยู่ในbinaryนี้ เช่น ls, cp, cd

- **/dev**

  จะมีเฉพาะไฟล์ที่สำคัญเท่านั้น เช่น ไฟล์ต่างๆของอุปกรณ์ ซึ่งไฟล์เหล่านี้จะเป็นแค่ไฟล์เสมือนเท่านั้น ไม่ใช่ไฟล์จริงบนดิสก์
  <br> เช่น (/dev/null, /dev/disk0, /dev/sda1, /dev/tty, /dev/random)

- **/etc**

  เป็นไดเร็กทอรี ที่ประกอบไปด้วยไฟล์ที่ใช้ในการกำหนดค่าหลักของระบบ เช่น password file, networking files

- **/usr**

  ใน /usr จะมีคำสั่งพื้นฐานของผู้ใช้ เอกสารของระบบรวมทั้งไลบรารีระบบ ทำให้ไฟล์ในไดเร็กทอรีนี้จึงเป็นแบบอ่านอย่างเดียว

- **/home**

  เป็นไดเร็กทอรีที่เก็บข้อมูลส่วนบุคคลสําหรับผู้ใช้รวมไปถึง การตั้งค่าส่วนบุคคล

- **/lib**

  ย่อมาจาก Library จะใช้สำหรับเก็บไลบรารี่ของโปรแกรมต่างๆ โดย /lib จะเก็บไลบรารี ที่จำเป็นสำหรับการทำงานของ /bin, /sbin

- **/sbin**

  คล้ายๆกับ /bin โดยจะเก็บโปรแกรมหรือคำสั่งของผู้ดูแลระบบ และสามารถเรียกใช้ได้โดย root หรือ sudo เท่านั้น 

- **/tmp**

  ใช้เก็บไฟล์ชั่วคราวแอปพลิเคชั่นจำนวนมากใช้ไดเร็กทอรีนี้ในการเก็บข้อมูลชั่วคราว เมื่อทำการบูตเครื่องขึ้นมาใหม่ข้อมูลใน /tmp ก็จะถูกลบไปด้วย 

- **/var**

  ย่อมากจาก variable เป็นไดเร็ทอรี ที่โปรแกรมใช้บ่อย สำหรับไฟล์ที่เปลี่ยนแปลงค่าบ่อย 

- **/boot**

  จะเก็บไฟล์ของ kernel และไฟล์ที่ใช้สำหรับการบูสเครื่องคอมพิวเตอร์ เช่น GRUB (GRand Undified Boot loader) 

- **/proc**

  จะเป็นไฟล์ระบบที่ถูกสร้างขึ้นอัตโนมัติ เพื่อใช้เก็บข้อมูลการทำงานของ processorที่กำลังทำงานอยู่และเก็บสถานะของตัวระบบ

- **/opt**

  ใช้สำหรับติดตั้งหรือจัดเก็บไฟล์ของโปรแกรมต่างๆที่ติดตั้งเพิ่ม

- **/root**

  เป็นโฮมไดเร็กทอรี่ของผู้ใช้ที่เป็น root

- **/media**

  ไดเร็กทอรี /media จะถูกสร้างขึ้นเมื่อมีการใช้สื่อที่สามารถถอดได้ เช่น USB, SD card 

- **/mnt**

  จะคล้ายกับ ไดเร็กทอรี่ /media แต่ /mnt จะใช้ในการ mount ระบบไฟล์ด้วยตัวเอง

- **/srv**

  เป็นไดเร็กทอรี ที่ประกอบด้วยข้อมูลสำหรับการให้บริการที่เฉพาะเจาะจง เช่น ข้อมูลสำหรับเว็บเซิร์ฟเวอร์ (WWW)

<br>

---

<br>

## Reference

- [Linuxconfig](https://linuxconfig.org/identifying-file-types-in-linux)
- [Javatpoint](https://www.javatpoint.com/linux-directories)
- [Linuxhandbook](https://linuxhandbook.com/linux-directory-structure/#:~:text=Linux%20directory%20structure%201%20%2F%20%E2%80%93%20The%20root,8%20%2Fsbin%20%E2%80%93%20System%20binaries%20...%20More%20items)
- [Geeksforgeeks](https://www.geeksforgeeks.org/linux-file-system/)

